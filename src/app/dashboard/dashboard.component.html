<div class="container text-center pt-5" *ngIf="loader">
  <i class="fa fa-spinner fa-4x fa-spin fa-fw" aria-hidden="true"></i>
</div>
<div class="container-fluid p-3" *ngIf="!loader">
  <div class="row">
    <div class="col-md-2">
      <div class="sticky-top">
        <div class="border rounded p-2">
          <h5 class="text-info">Filtros</h5>
          <div class="form-group">
            <label>Semestre:</label>
            <select class="form-control" [(ngModel)]="query.semestre" (change)="performQuery()">
              <option></option>
              <option *ngFor="let option of (semestre | async)" value="{{option.$key}}">{{option.$value}}</option>
            </select>
          </div>
        </div>
        <div class="list-group mb-2" id="list-tab" role="tablist">
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'informativos'" (click)="selectItem('informativos')">Informativos</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'piezas'" (click)="selectItem('piezas')">Piezas</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'lugares'" (click)="selectItem('lugares')">Lugares</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'localidades'" (click)="selectItem('localidades')">Localidades</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'quienes'" (click)="selectItem('quienes')">Quienes</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'dequienes'" (click)="selectItem('dequienes')">De quienes</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'dques'" (click)="selectItem('dques')">De ques</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'fuentes'" (click)="selectItem('fuentes')">Fuentes</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'tratamiento'" (click)="selectItem('tratamiento')">Tratamiento</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'retorica'" (click)="selectItem('retorica')">Retorica</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'origen'" (click)="selectItem('origen')">Origen</button>
          <button class="list-group-item list-group-item-action" [class.active]="selectedItem == 'rotulo'" (click)="selectItem('rotulo')">Rótulo</button>
        </div>
      </div>
    </div>

    <div class="col-md-10">
        <p-dataTable #dt [value]="informativos" exportFilename="informativos" resizableColumns="true" *ngIf="selectedItem == 'informativos'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="$key" header="Clave"></p-column>
            <p-column field="id_tarea" header="Id"></p-column>
            <p-column field="cadena-l" header="Cadena"></p-column>
            <p-column field="duracion" header="Duracion"></p-column>
            <p-column field="date" header="Fecha"></p-column>
            <p-column field="semestre-l" header="Semestre"></p-column>
            <p-column field="edicion-l" header="Edicion"></p-column>
        </p-dataTable>
        <p-dataTable #dt1 [value]="piezas" exportFilename="piezas" resizableColumns="true" *ngIf="selectedItem == 'piezas'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt1.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="$key" header="Clave Pieza"></p-column>
            <p-column field="tarea_id" header="Clave Tarea"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="duracion" header="Duracion"></p-column>
            <p-column field="genero-l" header="Genero"></p-column>
            <p-column field="format-l" header="Formato"></p-column>
            <p-column field="observaciones" header="Observaciones"></p-column>
            <p-column field="terminado" header="Teminado"></p-column>
            <p-column field="ambito-l" header="Ambito"></p-column>
            <p-column field="zona-l" header="Zona"></p-column>
            <p-column field="espConjunto" header="Conjunto España"></p-column>
        </p-dataTable>
        <p-dataTable #dt2 [value]="lugares" exportFilename="lugares" resizableColumns="true" *ngIf="selectedItem == 'lugares'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt2.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="ambito" header="Ambito"></p-column>
            <p-column field="zona" header="Zona"></p-column>  
            <p-column field="pais-l" header="Pais"></p-column>
            <p-column field="comunidad-l" header="Comunidad"></p-column>
            <p-column field="valor" header="Valoracion"></p-column>
        </p-dataTable>
        <p-dataTable #dt3 [value]="locals" exportFilename="localidades" resizableColumns="true" *ngIf="selectedItem == 'localidades'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt3.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="localidad" header="Localidad"></p-column>
            <p-column field="valor" header="Valoracion"></p-column>
        </p-dataTable>
        <p-dataTable #dt4 [value]="quienes" exportFilename="Quienes" resizableColumns="true" *ngIf="selectedItem == 'quienes'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt4.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="categoria-l" header="Agente Informativo - persona"></p-column>
            <p-column field="valor" header="Valoracion"></p-column>
        </p-dataTable>
        <p-dataTable #dt5 [value]="dquienes" exportFilename="DeQuienes" resizableColumns="true" *ngIf="selectedItem == 'dequienes'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt5.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="categoria-l" header="Agente Informativo"></p-column>
            <p-column field="persona" header="Persona"></p-column>
            <p-column field="valor" header="Valoracion"></p-column>
        </p-dataTable>
        <p-dataTable #dt6 [value]="dques" exportFilename="DeQues" resizableColumns="true" *ngIf="selectedItem == 'dques'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt6.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="categoria-l" header="Categoria - Etiqueta"></p-column>
            <p-column field="valor" header="Valoracion"></p-column>
        </p-dataTable>
        <p-dataTable #dt7 [value]="piezas" exportFilename="Fuentes" resizableColumns="true" *ngIf="selectedItem == 'fuentes'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt7.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="$key" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="fuente" header="Tiene Fuente"></p-column>
            <p-column field="declhombre" header="Totales Hombres"></p-column>
            <p-column field="declmujeres" header="Totales Mujeres"></p-column>
            <p-column field="fConfidencial" header="Fuentes Confidenciales"></p-column>
            <p-column field="fDir" header="Fuentes Directas"></p-column>
            <p-column field="fGenerica" header="Fuentes Genericas"></p-column>
        </p-dataTable>
        <p-dataTable #dt8 [value]="piezas" exportFilename="Tratamiento" resizableColumns="true" *ngIf="selectedItem == 'tratamiento'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt8.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="id_tarea" header="Titulo informativo"></p-column>
            <p-column field="$key" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="valedit-l" header="Valoracion Editorial"></p-column>
            <p-column field="informador-l" header="Informador"></p-column>
            <p-column field="infoAparece" header="Informador Aparece"></p-column>
            <p-column field="equilibrio" header="Equilibrio"></p-column>
            <p-column field="context" header="Contextualización"></p-column>
            <p-column field="fDir" header="Fuentes Directas"></p-column>
            <p-column field="relcad-l" header="Relación con Cadena"></p-column>
        </p-dataTable>
        <p-dataTable #dt9 [value]="retoricas" exportFilename="Retorica" resizableColumns="true" *ngIf="selectedItem == 'retorica'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt9.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="key" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="value" header="Retorica"></p-column>
        </p-dataTable>
        <p-dataTable #dt10 [value]="rotulos" exportFilename="Rótulo" resizableColumns="true" *ngIf="selectedItem == 'rotulo'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt10.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="key" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="value" header="Rotulo"></p-column>
        </p-dataTable>
        <p-dataTable #dt11 [value]="origenes" exportFilename="Origen" resizableColumns="true" *ngIf="selectedItem == 'origen'" [rows]="20" [paginator]="true" [pageLinks]="5" [rowsPerPageOptions]="[20,50,100]">
            <p-header>
                <div class="ui-helper-clearfix">
                    <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt11.exportCSV()" style="float:left"></button>
                </div>
            </p-header>
            <p-column field="key" header="Titulo informativo"></p-column>
            <p-column field="pieza" header="Clave Pieza"></p-column>
            <p-column field="title" header="Titulo"></p-column>
            <p-column field="value" header="Origen"></p-column>
        </p-dataTable>
    </div>
  </div>