<div class="container text-center pt-5" *ngIf="loader">
    <i class="fa fa-spinner fa-4x fa-spin fa-fw" aria-hidden="true"></i>
  </div>
  <p-tabView *ngIf="!loader">
    <p-tabPanel header="Panel">
      <div class="row mb-2">
        <div class="col-xl-12 p-2">
          <div class="border rounded p-2">
            <h3 class="text-info">Numero de piezas</h3>
            <div class="row mb-3">
              <div class="col-xl-6">
                <dx-pie-chart id="pie" type="pie" title="Total" palette="Ocean" [dataSource]="generoData">
                  <dxi-series argumentField="genero" valueField="total">
                    <dxo-label [visible]="true">
                      <dxo-connector [visible]="true"></dxo-connector>
                    </dxo-label>
                  </dxi-series>
                  <dxo-export [enabled]="true"></dxo-export>
                  <dxo-legend [margin]="0" horizontalAlignment="right" verticalAlignment="top"></dxo-legend>
                  <dxo-tooltip [enabled]="true"></dxo-tooltip>
                </dx-pie-chart>
              </div>
              <div class="col-xl-6">
                <dx-chart id="chart" palette="Ocean" [dataSource]="generoDataCadenaTotal" title="Total por cadena">
                  <dxi-series valueField="{{genero.$value}}" name="{{genero.$value}}" *ngFor="let genero of generos">
                    <dxo-label [visible]="true"></dxo-label>
                  </dxi-series>
                  <dxo-common-series-settings argumentField="cadena" type="stackedBar">
                  </dxo-common-series-settings>
                  <dxo-legend [margin]="0" horizontalAlignment="right" verticalAlignment="top"></dxo-legend>
                  <dxo-export [enabled]="true"></dxo-export>
                </dx-chart>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mb-2">
        <div class="col-xl-12 p-2">
          <div class="border rounded p-2">
            <h3 class="text-info">Duracion Media</h3>
            <div class="row mb-3">
              <div class="col-xl-6">
                <dx-pie-chart id="pie" type="pie" title="Total" palette="Ocean" [dataSource]="generoData">
                  <dxi-series argumentField="genero" valueField="dur">
                    <dxo-label [visible]="true">
                      <dxo-connector [visible]="true"></dxo-connector>
                    </dxo-label>
                  </dxi-series>
                  <dxo-export [enabled]="true"></dxo-export>
                  <dxo-legend [margin]="0" horizontalAlignment="right" verticalAlignment="top"></dxo-legend>
                  <dxo-tooltip [enabled]="true"></dxo-tooltip>
                </dx-pie-chart>
              </div>
              <div class="col-xl-6">
                <dx-chart id="chart" palette="Ocean" [dataSource]="generoDataCadenaDur" title="Duracion por cadena">
                  <dxi-series valueField="{{genero.$value}}" name="{{genero.$value}}" *ngFor="let genero of generos">
                    <dxo-label [visible]="true"></dxo-label>
                  </dxi-series>
                  <dxo-common-series-settings argumentField="cadena" type="stackedBar">
                  </dxo-common-series-settings>
                  <dxo-legend [margin]="0" horizontalAlignment="right" verticalAlignment="top"></dxo-legend>
                  <dxo-export [enabled]="true"></dxo-export>
                </dx-chart>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mb-2">
          <div class="col-xl-12 p-2">
            <div class="border rounded p-2">
              <h3 class="text-info">Duracion</h3>
              <div class="row mb-3">
                <div class="col-xl-6">
                  <dx-pie-chart id="pie" type="pie" title="Total" palette="Ocean" [dataSource]="generoData">
                    <dxi-series argumentField="genero" valueField="med">
                      <dxo-label [visible]="true">
                        <dxo-connector [visible]="true"></dxo-connector>
                      </dxo-label>
                    </dxi-series>
                    <dxo-export [enabled]="true"></dxo-export>
                    <dxo-legend [margin]="0" horizontalAlignment="right" verticalAlignment="top"></dxo-legend>
                    <dxo-tooltip [enabled]="true"></dxo-tooltip>
                  </dx-pie-chart>
                </div>
                <div class="col-xl-6">
                  <dx-chart id="chart" palette="Ocean" [dataSource]="generoDataCadenaMed" title="Duracion media por cadena">
                    <dxi-series valueField="{{genero.$value}}" name="{{genero.$value}}" *ngFor="let genero of generos">
                      <dxo-label [visible]="true"></dxo-label>
                    </dxi-series>
                    <dxo-common-series-settings argumentField="cadena" type="stackedBar">
                    </dxo-common-series-settings>
                    <dxo-legend [margin]="0" horizontalAlignment="right" verticalAlignment="top"></dxo-legend>
                    <dxo-export [enabled]="true"></dxo-export>
                  </dx-chart>
                </div>
              </div>
            </div>
          </div>
        </div>
    </p-tabPanel>
    <p-tabPanel header="Datos - Piezas">
      <p-dataTable #dt1 [value]="piezas" exportFilename="piezas" resizableColumns="true">
        <p-header>
          <div class="ui-helper-clearfix">
            <button type="button" pButton icon="fa-file-o" iconPos="left" label="CSV" (click)="dt1.exportCSV()" style="float:left"></button>
          </div>
        </p-header>
        <p-column field="$key" header="Clave Pieza"></p-column>
        <p-column field="tarea_id" header="Clave Tarea"></p-column>
        <p-column field="title" header="Titulo"></p-column>
        <p-column field="duracion" header="Duracion"></p-column>
        <p-column field="genero-l" header="Genero"></p-column>
        <p-column field="format-l" header="Formato"></p-column>
        <p-column field="observaciones" header="Observaciones"></p-column>
        <p-column field="terminado" header="Teminado"></p-column>
      </p-dataTable>
    </p-tabPanel>
  </p-tabView>